{"version":3,"sources":["newsletter-form.js"],"names":["$","jqBootstrapValidation","preventSubmit","submitError","$form","event","errors","submitSuccess","preventDefault","body","email","val","subject","message","name","phone","lambdaRequest","Request","headers","content-Type","method","JSON","stringify","fetch","then","html","append","trigger","catch","text","filter","this","is","click","e","tab","focus"],"mappings":"AAAAA,EAAA,WAEAA,EAAA,oDAAAC,sBAAA,CACAC,eAAA,EACAC,YAAA,SAAAC,EAAAC,EAAAC,KAEAC,cAAA,SAAAH,EAAAC,GACAA,EAAAG,iBAEA,IAMAC,EAAA,CACAC,MAPAV,EAAA,0BAAAW,MAQAC,QAPA,0BAQAC,QAPA,kCAQAC,KAAA,GACAC,MAAA,IAGAC,EAAA,IAAAC,QAVA,gFAUA,CACAC,QAAA,CACAC,eAAA,oBAEAC,OAAA,OACAX,KAAAY,KAAAC,UAAAb,KAGAc,MAAAP,GAEAQ,KAAA,WAEAxB,EAAA,uBAAAyB,KAAA,qCACAzB,EAAA,wCAAAyB,KAAA,uFACAC,OAAA,aACA1B,EAAA,wCACA0B,OAAA,iDACA1B,EAAA,wCACA0B,OAAA,UAEA1B,EAAA,gBAAA2B,QAAA,WAEAC,MAAA,WAEA5B,EAAA,uBAAAyB,KAAA,oCACAzB,EAAA,uCAAAyB,KAAA,uFACAC,OAAA,aACA1B,EAAA,uCAAA0B,OAAA1B,EAAA,YAAA6B,KAAA,4FACA7B,EAAA,uCAAA0B,OAAA,UAEA1B,EAAA,gBAAA2B,QAAA,YAGAG,OAAA,WACA,OAAA9B,EAAA+B,MAAAC,GAAA,eAIAhC,EAAA,wBAAAiC,MAAA,SAAAC,GACAA,EAAA1B,iBACAR,EAAA+B,MAAAI,IAAA,YAKAnC,EAAA,SAAAoC,MAAA,WACApC,EAAA,uBAAAyB,KAAA","file":"newsletter-form.min.js","sourcesContent":["$(function () {\r\n\r\n    $(\"#newsletter-form input,#newsletter-form textarea\").jqBootstrapValidation({\r\n        preventSubmit: true,\r\n        submitError: function ($form, event, errors) {\r\n        },\r\n        submitSuccess: function ($form, event) {\r\n            event.preventDefault();\r\n            // Gets the values of each field in our form. This is the data we'll send to our Lambda function.\r\n            var formEmail = $(\".newsletter-form-email\").val();\r\n            var formSubject = \"Newsletter subscription\";\r\n            var formMessage = \"Subscribe me to the newsletter.\";\r\n            // This is the endpoint we created in our API Gateway. This is where we make our POST request, which calls our Lambda function.\r\n            var endpoint = 'https://5rzdj14qhl.execute-api.eu-west-1.amazonaws.com/prod/ContactFormLambda';\r\n            // Remember those form values we just grabbed? We're going to put them into an object here.\r\n            var body = {\r\n                email: formEmail,\r\n                subject: formSubject,\r\n                message: formMessage,\r\n                name: \"\",\r\n                phone: \"\"\r\n            };\r\n            // Here, we instantiate our Request. This is a special object used by the Fetch API so it knows where to send data, what data to send, and how to send it.\r\n            var lambdaRequest = new Request(endpoint, {\r\n                headers: {\r\n                    \"content-Type\": \"application/json\"\r\n                },\r\n                method: 'POST',\r\n                body: JSON.stringify(body)\r\n            });\r\n            // Call the Fetch API to make our request\r\n            fetch(lambdaRequest)\r\n            // This is where you can handle errors. This is just an example, so we won't cover that.\r\n                .then(function () {\r\n                    // Success message\r\n                    $('#success-newsletter').html(\"<div class='alert alert-success'>\");\r\n                    $('#success-newsletter > .alert-success').html(\"<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;\")\r\n                        .append(\"</button>\");\r\n                    $('#success-newsletter > .alert-success')\r\n                        .append(\"<strong>Your message has been sent. </strong>\");\r\n                    $('#success-newsletter > .alert-success')\r\n                        .append('</div>');\r\n                    //clear all fields\r\n                    $('#contactForm').trigger(\"reset\");\r\n                })\r\n                .catch(function () {\r\n                    // Fail message\r\n                    $('#success-newsletter').html(\"<div class='alert alert-danger'>\");\r\n                    $('#success-newsletter > .alert-danger').html(\"<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;\")\r\n                        .append(\"</button>\");\r\n                    $('#success-newsletter > .alert-danger').append($(\"<strong>\").text(\"Sorry, we have some technical problems. Please try again later or write us another way.\"));\r\n                    $('#success-newsletter > .alert-danger').append('</div>');\r\n                    //clear all fields\r\n                    $('#contactForm').trigger(\"reset\");\r\n                });\r\n        },\r\n        filter: function () {\r\n            return $(this).is(\":visible\");\r\n        },\r\n    });\r\n\r\n    $(\"a[data-toggle=\\\"tab\\\"]\").click(function (e) {\r\n        e.preventDefault();\r\n        $(this).tab(\"show\");\r\n    });\r\n});\r\n\r\n/*When clicking on Full hide fail/success boxes */\r\n$('#name').focus(function () {\r\n    $('#success-newsletter').html('');\r\n});\r\n"]}