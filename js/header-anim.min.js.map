{"version":3,"sources":["header-anim.js"],"names":["width","height","largeHeader","canvas","ctx","points","target","animateHeader","mouseMove","e","posx","posy","pageX","pageY","clientX","clientY","document","body","scrollLeft","documentElement","scrollTop","x","y","scrollCheck","resize","window","innerWidth","innerHeight","style","animate","i","clearRect","Math","abs","getDistance","active","circle","drawLines","draw","requestAnimationFrame","shiftPoint","p","TweenLite","to","random","originX","originY","ease","Circ","easeInOut","onComplete","closest","beginPath","moveTo","lineTo","strokeStyle","stroke","Circle","pos","rad","color","_this","this","radius","arc","PI","fillStyle","fill","p1","p2","pow","getElementById","getContext","px","py","push","length","j","placed","k","undefined","c","initHeader","initAnimation","addEventListener","addListeners"],"mappings":"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","file":"header-anim.min.js","sourcesContent":["(function() {\r\n\r\n    var width, height, largeHeader, canvas, ctx, points, target, animateHeader = true;\r\n\r\n    // Main\r\n    initHeader();\r\n    initAnimation();\r\n    addListeners();\r\n\r\n    function initHeader() {\r\n        width = window.innerWidth;\r\n        height = window.innerHeight;\r\n        target = {x: width/2, y: height/2};\r\n\r\n        largeHeader = document.getElementById('large-header');\r\n        largeHeader.style.height = height+'px';\r\n\r\n        canvas = document.getElementById('demo-canvas');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        ctx = canvas.getContext('2d');\r\n\r\n        // create points\r\n        points = [];\r\n        for(var x = 0; x < width; x = x + width/20) {\r\n            for(var y = 0; y < height; y = y + height/20) {\r\n                var px = x + Math.random()*width/20;\r\n                var py = y + Math.random()*height/20;\r\n                var p = {x: px, originX: px, y: py, originY: py };\r\n                points.push(p);\r\n            }\r\n        }\r\n\r\n        // for each point find the 5 closest points\r\n        for(var i = 0; i < points.length; i++) {\r\n            var closest = [];\r\n            var p1 = points[i];\r\n            for(var j = 0; j < points.length; j++) {\r\n                var p2 = points[j]\r\n                if(!(p1 == p2)) {\r\n                    var placed = false;\r\n                    for(var k = 0; k < 5; k++) {\r\n                        if(!placed) {\r\n                            if(closest[k] == undefined) {\r\n                                closest[k] = p2;\r\n                                placed = true;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    for(var k = 0; k < 5; k++) {\r\n                        if(!placed) {\r\n                            if(getDistance(p1, p2) < getDistance(p1, closest[k])) {\r\n                                closest[k] = p2;\r\n                                placed = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            p1.closest = closest;\r\n        }\r\n\r\n        // assign a circle to each point\r\n        for(var i in points) {\r\n            var c = new Circle(points[i], 2+Math.random()*2, 'rgba(255,255,255,0.3)');\r\n            points[i].circle = c;\r\n        }\r\n    }\r\n\r\n    // Event handling\r\n    function addListeners() {\r\n        if(!('ontouchstart' in window)) {\r\n            window.addEventListener('mousemove', mouseMove);\r\n        }\r\n        window.addEventListener('scroll', scrollCheck);\r\n        window.addEventListener('resize', resize);\r\n    }\r\n\r\n    function mouseMove(e) {\r\n        var posx = posy = 0;\r\n        if (e.pageX || e.pageY) {\r\n            posx = e.pageX;\r\n            posy = e.pageY;\r\n        }\r\n        else if (e.clientX || e.clientY)    {\r\n            posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n            posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n        }\r\n        target.x = posx;\r\n        target.y = posy;\r\n    }\r\n\r\n    function scrollCheck() {\r\n        if(document.body.scrollTop > height) animateHeader = false;\r\n        else animateHeader = true;\r\n    }\r\n\r\n    function resize() {\r\n        width = window.innerWidth;\r\n        height = window.innerHeight;\r\n        largeHeader.style.height = height+'px';\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n    }\r\n\r\n    // animation\r\n    function initAnimation() {\r\n        animate();\r\n        for(var i in points) {\r\n            shiftPoint(points[i]);\r\n        }\r\n    }\r\n\r\n    function animate() {\r\n        if(animateHeader) {\r\n            ctx.clearRect(0,0,width,height);\r\n            for(var i in points) {\r\n                // detect points in range\r\n                if(Math.abs(getDistance(target, points[i])) < 4000) {\r\n                    points[i].active = 0.3;\r\n                    points[i].circle.active = 0.6;\r\n                } else if(Math.abs(getDistance(target, points[i])) < 20000) {\r\n                    points[i].active = 0.1;\r\n                    points[i].circle.active = 0.3;\r\n                } else if(Math.abs(getDistance(target, points[i])) < 40000) {\r\n                    points[i].active = 0.02;\r\n                    points[i].circle.active = 0.1;\r\n                } else {\r\n                    points[i].active = 0;\r\n                    points[i].circle.active = 0;\r\n                }\r\n\r\n                drawLines(points[i]);\r\n                points[i].circle.draw();\r\n            }\r\n        }\r\n        requestAnimationFrame(animate);\r\n    }\r\n\r\n    function shiftPoint(p) {\r\n        TweenLite.to(p, 1+1*Math.random(), {x:p.originX-50+Math.random()*100,\r\n            y: p.originY-50+Math.random()*100, ease:Circ.easeInOut,\r\n            onComplete: function() {\r\n                shiftPoint(p);\r\n            }});\r\n    }\r\n\r\n    // Canvas manipulation\r\n    function drawLines(p) {\r\n        if(!p.active) return;\r\n        for(var i in p.closest) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(p.x, p.y);\r\n            ctx.lineTo(p.closest[i].x, p.closest[i].y);\r\n            ctx.strokeStyle = 'rgba(156,217,249,'+ p.active+')';\r\n            ctx.stroke();\r\n        }\r\n    }\r\n\r\n    function Circle(pos,rad,color) {\r\n        var _this = this;\r\n\r\n        // constructor\r\n        (function() {\r\n            _this.pos = pos || null;\r\n            _this.radius = rad || null;\r\n            _this.color = color || null;\r\n        })();\r\n\r\n        this.draw = function() {\r\n            if(!_this.active) return;\r\n            ctx.beginPath();\r\n            ctx.arc(_this.pos.x, _this.pos.y, _this.radius, 0, 2 * Math.PI, false);\r\n            ctx.fillStyle = 'rgba(215,217,249,'+ _this.active+')';\r\n            ctx.fill();\r\n        };\r\n    }\r\n\r\n    // Util\r\n    function getDistance(p1, p2) {\r\n        return Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2);\r\n    }\r\n\r\n})();\r\n"]}